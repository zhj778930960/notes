<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>web 及网络基础 | 相得益张</title>
    <meta name="generator" content="VuePress 1.5.0">
    <link rel="icon" href="/notes/favicon.ico">
    <meta name="description" content="笔记">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <link rel="preload" href="/notes/assets/css/0.styles.3bed5ca3.css" as="style"><link rel="preload" href="/notes/assets/js/app.c08f3151.js" as="script"><link rel="preload" href="/notes/assets/js/3.e5945746.js" as="script"><link rel="preload" href="/notes/assets/js/1.444d0b66.js" as="script"><link rel="preload" href="/notes/assets/js/25.c17e9240.js" as="script"><link rel="prefetch" href="/notes/assets/js/10.5b6ce26c.js"><link rel="prefetch" href="/notes/assets/js/11.9f0450b4.js"><link rel="prefetch" href="/notes/assets/js/12.7b1a5f2a.js"><link rel="prefetch" href="/notes/assets/js/13.84924ed7.js"><link rel="prefetch" href="/notes/assets/js/14.aab66ef8.js"><link rel="prefetch" href="/notes/assets/js/15.a83bcca9.js"><link rel="prefetch" href="/notes/assets/js/16.9a7b507c.js"><link rel="prefetch" href="/notes/assets/js/17.18b95e31.js"><link rel="prefetch" href="/notes/assets/js/18.6d74c144.js"><link rel="prefetch" href="/notes/assets/js/19.563f4e94.js"><link rel="prefetch" href="/notes/assets/js/20.1189591a.js"><link rel="prefetch" href="/notes/assets/js/21.5bef951b.js"><link rel="prefetch" href="/notes/assets/js/22.8c47407c.js"><link rel="prefetch" href="/notes/assets/js/23.129066a7.js"><link rel="prefetch" href="/notes/assets/js/24.cb9ced52.js"><link rel="prefetch" href="/notes/assets/js/26.4828e0b5.js"><link rel="prefetch" href="/notes/assets/js/27.eb4e8855.js"><link rel="prefetch" href="/notes/assets/js/28.0d055896.js"><link rel="prefetch" href="/notes/assets/js/29.83c00fe6.js"><link rel="prefetch" href="/notes/assets/js/30.0d8e89ae.js"><link rel="prefetch" href="/notes/assets/js/31.81fdbb3d.js"><link rel="prefetch" href="/notes/assets/js/32.83951afe.js"><link rel="prefetch" href="/notes/assets/js/33.33d7fcd0.js"><link rel="prefetch" href="/notes/assets/js/34.0e74a64c.js"><link rel="prefetch" href="/notes/assets/js/35.5ed9fb88.js"><link rel="prefetch" href="/notes/assets/js/36.14a043c9.js"><link rel="prefetch" href="/notes/assets/js/37.bdf1e138.js"><link rel="prefetch" href="/notes/assets/js/38.284480b3.js"><link rel="prefetch" href="/notes/assets/js/39.35ece81f.js"><link rel="prefetch" href="/notes/assets/js/4.f7c27659.js"><link rel="prefetch" href="/notes/assets/js/40.85816c1a.js"><link rel="prefetch" href="/notes/assets/js/41.87b2c680.js"><link rel="prefetch" href="/notes/assets/js/42.ded50c45.js"><link rel="prefetch" href="/notes/assets/js/43.ea56c5a7.js"><link rel="prefetch" href="/notes/assets/js/44.c2c24f50.js"><link rel="prefetch" href="/notes/assets/js/45.5c811eb9.js"><link rel="prefetch" href="/notes/assets/js/46.7a4fe741.js"><link rel="prefetch" href="/notes/assets/js/47.990f2441.js"><link rel="prefetch" href="/notes/assets/js/48.ce2bef73.js"><link rel="prefetch" href="/notes/assets/js/49.da75ba67.js"><link rel="prefetch" href="/notes/assets/js/5.4eff9217.js"><link rel="prefetch" href="/notes/assets/js/50.3194dfcf.js"><link rel="prefetch" href="/notes/assets/js/51.ff2c2f36.js"><link rel="prefetch" href="/notes/assets/js/52.40d8ff2a.js"><link rel="prefetch" href="/notes/assets/js/53.63ccc187.js"><link rel="prefetch" href="/notes/assets/js/54.f922731e.js"><link rel="prefetch" href="/notes/assets/js/55.2094623a.js"><link rel="prefetch" href="/notes/assets/js/56.ed6b35aa.js"><link rel="prefetch" href="/notes/assets/js/57.7ff24c82.js"><link rel="prefetch" href="/notes/assets/js/58.7f2a8572.js"><link rel="prefetch" href="/notes/assets/js/59.aef308ee.js"><link rel="prefetch" href="/notes/assets/js/6.759444a1.js"><link rel="prefetch" href="/notes/assets/js/60.043fa17b.js"><link rel="prefetch" href="/notes/assets/js/61.ad5b299b.js"><link rel="prefetch" href="/notes/assets/js/62.d30b9db9.js"><link rel="prefetch" href="/notes/assets/js/63.c53f8e8b.js"><link rel="prefetch" href="/notes/assets/js/64.abf1bc59.js"><link rel="prefetch" href="/notes/assets/js/65.4bc3683a.js"><link rel="prefetch" href="/notes/assets/js/66.5e048548.js"><link rel="prefetch" href="/notes/assets/js/67.bab97f56.js"><link rel="prefetch" href="/notes/assets/js/68.4c7f1c4c.js"><link rel="prefetch" href="/notes/assets/js/69.0cfb6b73.js"><link rel="prefetch" href="/notes/assets/js/7.c640da03.js"><link rel="prefetch" href="/notes/assets/js/70.8821a3ca.js"><link rel="prefetch" href="/notes/assets/js/71.5390fae3.js"><link rel="prefetch" href="/notes/assets/js/72.eaa9450a.js"><link rel="prefetch" href="/notes/assets/js/73.a00f8db1.js"><link rel="prefetch" href="/notes/assets/js/74.776c0889.js"><link rel="prefetch" href="/notes/assets/js/75.447e9064.js"><link rel="prefetch" href="/notes/assets/js/76.d4bebdfb.js"><link rel="prefetch" href="/notes/assets/js/77.7c4136f2.js"><link rel="prefetch" href="/notes/assets/js/78.a772a4d9.js"><link rel="prefetch" href="/notes/assets/js/8.2c40ca9d.js"><link rel="prefetch" href="/notes/assets/js/9.8d808dfc.js">
    <link rel="stylesheet" href="/notes/assets/css/0.styles.3bed5ca3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container" data-v-dad8a512><div data-v-dad8a512><div id="loader-wrapper" class="loading-wrapper" data-v-d48f4d20 data-v-dad8a512 data-v-dad8a512><div class="loader-main" data-v-d48f4d20><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div><div data-v-d48f4d20></div></div> <!----> <!----></div> <div class="password-shadow password-wrapper-out" style="display:none;" data-v-64685f0e data-v-dad8a512 data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>相得益张</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>相得益张</span>
            
          <span data-v-64685f0e>2016 - </span>
          2020
        </a></span></div></div> <div class="hide" data-v-dad8a512><header class="navbar" data-v-dad8a512><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/notes/" class="home-link router-link-active"><img src="/notes/logo.png" alt="相得益张" class="logo"> <span class="site-name">相得益张</span></a> <div class="links"><div class="color-picker"><a class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="mode-options"><h4 class="title">Choose mode</h4> <ul class="color-mode-options"><li class="dark">dark</li><li class="auto active">auto</li><li class="light">light</li></ul></div></div></div> <div class="search-box"><i class="iconfont reco-search"></i> <input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/docs/node/1 Node.js基础-环境安全配置.html" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/node进阶/浅谈 Node.js 模块机制及常见面试问题解答.html" class="nav-link"><i class="iconfont undefined"></i>
  Node进阶
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/koa2/1 Node.js-Web开发-supervisor &amp; nodemon.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa2
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/Egg基础/1 egg.js介绍和环境搭建.html" class="nav-link"><i class="iconfont undefined"></i>
  Egg基础
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/nginx/1 Nginx 环境搭建.html" class="nav-link"><i class="iconfont undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/HTTP协议/1 web及网络基础.html" class="nav-link"><i class="iconfont undefined"></i>
  HTTp协议
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/TypeScript/1 基础类型.html" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/Css/1 Grid 网格布局.html" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      问题
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/docs/theme-reco/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhj778930960/notes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask" data-v-dad8a512></div> <aside class="sidebar" data-v-dad8a512><div class="personal-info-wrapper" data-v-ca798c94 data-v-dad8a512><!----> <h3 class="name" data-v-ca798c94>
    相得益张
  </h3> <div class="num" data-v-ca798c94><div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Article</h6></div> <div data-v-ca798c94><h3 data-v-ca798c94>0</h3> <h6 data-v-ca798c94>Tag</h6></div></div> <hr data-v-ca798c94></div> <nav class="nav-links"><div class="nav-item"><a href="/notes/" class="nav-link"><i class="iconfont reco-home"></i>
  主页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      笔记
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/docs/node/1 Node.js基础-环境安全配置.html" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/node进阶/浅谈 Node.js 模块机制及常见面试问题解答.html" class="nav-link"><i class="iconfont undefined"></i>
  Node进阶
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/koa2/1 Node.js-Web开发-supervisor &amp; nodemon.html" class="nav-link"><i class="iconfont undefined"></i>
  Koa2
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/Egg基础/1 egg.js介绍和环境搭建.html" class="nav-link"><i class="iconfont undefined"></i>
  Egg基础
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/nginx/1 Nginx 环境搭建.html" class="nav-link"><i class="iconfont undefined"></i>
  Nginx
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/HTTP协议/1 web及网络基础.html" class="nav-link"><i class="iconfont undefined"></i>
  HTTp协议
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/TypeScript/1 基础类型.html" class="nav-link"><i class="iconfont undefined"></i>
  TypeScript
</a></li><li class="dropdown-item"><!----> <a href="/notes/docs/Css/1 Grid 网格布局.html" class="nav-link"><i class="iconfont undefined"></i>
  Css
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-message"></i>
      问题
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/notes/docs/theme-reco/" class="nav-link"><i class="iconfont undefined"></i>
  Node
</a></li></ul></div></div><div class="nav-item"><a href="https://github.com/zhj778930960/notes" target="_blank" rel="noopener noreferrer" class="nav-link external"><i class="iconfont reco-github"></i>
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav> <ul class="sidebar-links"><li><a href="/notes/docs/HTTP协议/1 web及网络基础.html" class="active sidebar-link">web 及网络基础</a></li><li><a href="/notes/docs/HTTP协议/2 简单的HTTP协议.html" class="sidebar-link">web 及网络基础</a></li></ul> </aside> <div class="password-shadow password-wrapper-in" style="display:none;" data-v-64685f0e data-v-dad8a512><h3 class="title" style="display:none;" data-v-64685f0e data-v-64685f0e>web 及网络基础</h3> <!----> <label id="box" class="inputBox" style="display:none;" data-v-64685f0e data-v-64685f0e><input type="password" value="" data-v-64685f0e> <span data-v-64685f0e>Konck! Knock!</span> <button data-v-64685f0e>OK</button></label> <div class="footer" style="display:none;" data-v-64685f0e data-v-64685f0e><span data-v-64685f0e><i class="iconfont reco-theme" data-v-64685f0e></i> <a target="blank" href="https://vuepress-theme-reco.recoluan.com" data-v-64685f0e>vuePress-theme-reco</a></span> <span data-v-64685f0e><i class="iconfont reco-copyright" data-v-64685f0e></i> <a data-v-64685f0e><span data-v-64685f0e>相得益张</span>
            
          <span data-v-64685f0e>2016 - </span>
          2020
        </a></span></div></div> <div data-v-dad8a512><main class="page" style="padding-right:0;"><div class="page-title" style="display:none;"><h1>web 及网络基础</h1> <div data-v-3b7f5bdf><i class="iconfont reco-account" data-v-3b7f5bdf><span data-v-3b7f5bdf>相得益张</span></i> <!----> <!----> <!----></div></div> <div class="theme-reco-content content__default" style="display:none;"><ol><li><p>网络基础<code>TCP/IP</code> 协议族</p> <ul><li>不同的硬件、操作系统之间的通信，所有的这一切都需要一种规则。而我们就把这种规则称为协议（protocol）</li> <li><code>TCP/IP</code>协议族，有了分层结构，总共分为下面四层 从上往下
<ul><li>应用层:   应用层决定了向用户提供应用服务时通信的活动。
<ul><li>FTP 文件传输协议</li> <li>DNS域名系统</li> <li>HTTP协议</li></ul></li> <li>传输层:   传输层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。
<ul><li>TCP 传输控制协议</li> <li>UDP 用户数据报协议</li></ul></li> <li>网络层：网络互联层，用于处理在网络上流动的数据包，数据包是网络传输的最小数据单位，该层规定了通过怎样的传输路线，到达对方的计算机，并把数据包传送给对方。</li> <li>链路层：又名网络接口层，数据链路层，用来处理网络的硬件部分。
<ul><li>操作系统</li> <li>硬件的设备驱动</li> <li>NIC 网卡</li> <li>光纤</li></ul></li></ul></li></ul></li> <li><p>TCP/IP 通信传输流</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span> 客户端 发送

  <span class="token constant">HTTP</span>客户端（应用层） <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>   <span class="token constant">TCP</span><span class="token punctuation">(</span>传输层<span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token constant">IP</span><span class="token punctuation">(</span>网络层<span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token function">网络</span><span class="token punctuation">(</span>链路层<span class="token punctuation">)</span>

  <span class="token comment">// 其实在每一层 客户端都会给打上自己这一层的标记，包裹到上面，然后传输到下一层  就像 套娃一样   </span>

<span class="token number">2.</span> 服务器 接收

  <span class="token function">网络</span><span class="token punctuation">(</span>链路层<span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>   <span class="token constant">IP</span><span class="token punctuation">(</span>网络层<span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span> <span class="token constant">TCP</span><span class="token punctuation">(</span>传输层<span class="token punctuation">)</span>  <span class="token operator">--</span><span class="token operator">-</span><span class="token operator">&gt;</span>  <span class="token constant">HTTP</span><span class="token function">服务器</span><span class="token punctuation">(</span>应用层<span class="token punctuation">)</span>

 <span class="token comment">// 服务器接收的时候，就会把套娃一个一个的揭开，拿到最里面一层的数据</span>

         <span class="token punctuation">(</span> <span class="token function">以太网首部</span>  <span class="token punctuation">(</span> <span class="token constant">IP</span><span class="token function">首部</span> <span class="token punctuation">(</span> <span class="token constant">TCP</span><span class="token function">首部</span><span class="token punctuation">(</span> <span class="token punctuation">(</span><span class="token constant">HTTP</span>数据<span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span> <span class="token punctuation">)</span>


 # 可以看到，客户端是从上往下走， 而服务器 是从下往上走
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div></li> <li><p>与HTTP 密切相关的协议： IP协议、TCP协议、DNS协议</p></li></ol> <ul><li><p>IP 协议 （Internet Protocol）</p> <ul><li>这里的IP 协议 不是IP地址， IP 地址只是IP协议的一部分</li> <li>位于网络层，从上往下的第三层</li> <li>IP 协议的作用是，是把各种数据包传送给对方，要确保确实能够传送到对方那里，需要满足各类条件其中最重要的两个是
<ul><li>IP地址： 指明了节点被分配到的地址。IP 地址可以和MAC地址进行匹配，IP地址可以变换</li> <li>MAC地址：指网卡所属的固定的地址。MAC地址一般轻易不会改变的</li></ul></li> <li>如何根据IP 地址来查出对应的MAC地址，这个时候就需要用到ARP协议（Address Resolution Protocol）地址解析协议</li></ul></li> <li><p>TCP协议</p> <ul><li><p>TCP协议位于传输层，也就是从上往下的第二层。</p></li> <li><p>TCP 提供可靠的字节流服务</p> <ul><li>可靠是指，能够把数据准确的传递给对方。</li> <li>字节流服务，是指，为了方便传输，将大块数据割成以报文段为单位的数据包进行管理。</li></ul></li> <li><p>为了准确无误的将数据送达到目标处  <strong>TCP协议采用了三次握手策略</strong>， 使用SYN 和 ACK 两个标志：  其实就是为了知道双方的接收和发送都是正常的</p> <ul><li><p>发送端，发送一个带SYN标志的数据给接收端。SYN=1  顺序号seq = x    此时 服务器，知道自己接收正常，    完成第一次握手</p></li> <li><p>接收端，接收后，回带一个SYN/ACK 标记的数据包以示，此时 SYN = 1  ACK =  1   seq = y   ack =  x + 1    客户端知道自己发送、接收正常，服务器接收、发送正常   完成第二次握手</p></li> <li><p>发送端，拿到SYN/ACK 之后 ， 发送一个带 ACK标记的数据包给接收端，  .seq=x+1,ACK=1,ack=y+1  服务器知道客户端发送，接收正常，自己接收，发送也正常   代表握手结束。 完成第三次握手</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code># 简单说明一下 为啥需要三次握手，  主要的目的就是为了证明，发送端 和 接收端   的    发送和接收功能  都是正常的

 <span class="token comment">// ACK：确认序号的标志，ACK=1表示确认号有效，ACK=0表示报文不含确认序号信息</span>

 <span class="token comment">// SYN：连接请求序号标志，用于建立连接，SYN=1表示请求连接</span>

 

<span class="token number">1.</span>   客户端  发送<span class="token constant">SYN</span><span class="token operator">=</span> <span class="token number">1</span>  seq <span class="token operator">=</span> x 到  服务器 
    此时 客户端不知道自己发送是否正常，     服务器知道自己的接收是正常的
    #  客户端： 发送未知，  接收未知
    #  服务器： 发送未知，  接收<span class="token constant">OK</span>
    
<span class="token number">2</span>   服务器  发送  <span class="token constant">SYN</span> <span class="token operator">=</span> <span class="token number">1</span>  <span class="token constant">ACK</span>  <span class="token operator">=</span><span class="token number">1</span>   seq <span class="token operator">=</span> y  ack <span class="token operator">=</span>x<span class="token operator">+</span><span class="token number">1</span>  到 发送 客户端
    此时  服务器知道自己接收正常，不知道自己发送是否正常；  客户端知道自己接收和发送都正常
    
    # 客户端： 发送<span class="token constant">OK</span>， 接收<span class="token constant">OK</span>
    # 服务器： 发送未知，接收<span class="token constant">OK</span> 
    
    
<span class="token number">3</span>   客户端将 <span class="token constant">ACK</span> <span class="token operator">=</span> <span class="token number">1</span>  seq <span class="token operator">=</span> x <span class="token operator">+</span> <span class="token number">1</span>  ack <span class="token operator">=</span> y <span class="token operator">+</span><span class="token number">1</span> 发送到服务器
    此时，服务器就知道自己上一次的发送也是正常的
    
    # 客户端： 发送<span class="token constant">OK</span><span class="token punctuation">,</span>  接收<span class="token constant">OK</span>
    # 服务器： 发送<span class="token constant">OK</span><span class="token punctuation">,</span>  接收<span class="token constant">OK</span>
    
    

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div></li></ul></li> <li><p>当这个TCP连接 不需要的时候，双方就会协商断开，<strong>四次挥手</strong></p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code># 四次挥手的目的 是为了告知双方，要断开连接了，做好准备工作
<span class="token comment">// 在挥手之前 两个的状态都是ESTABLISHED 已建立连接的状态</span>

 <span class="token comment">//  FIN：结束标志，用于释放连接，为1表示关闭本方数据流 </span>

<span class="token number">1.</span> 客户端发起要断开连接的请求  <span class="token constant">FIN</span><span class="token operator">=</span><span class="token number">1</span> seq<span class="token operator">=</span>u   到服务器   此时 客户端的状态变为 <span class="token constant">FIN</span><span class="token operator">-</span><span class="token constant">WAIT</span><span class="token operator">-</span><span class="token number">1</span>

<span class="token number">2.</span> 服务器接收到客户端的信息之后，发送<span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span> ack<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span> seq<span class="token operator">=</span>v  服务器 变为<span class="token constant">CLOSE</span><span class="token operator">-</span><span class="token constant">WAIT</span>状态  
   客户端接收到服务器的信息之后 将自己的状态改为 <span class="token constant">FIN</span><span class="token operator">-</span><span class="token constant">WAIT</span><span class="token operator">-</span><span class="token number">2</span>

<span class="token number">3.</span> 服务器发送<span class="token constant">FIN</span><span class="token operator">=</span><span class="token number">1</span> <span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span> ack<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span> seq<span class="token operator">=</span>w 然后 服务器变为<span class="token constant">LAST</span><span class="token operator">-</span><span class="token constant">ACK</span> 最后确认状态
   客户端接收到服务端的信息之后，将自己的状态变为<span class="token constant">TIME</span><span class="token operator">-</span><span class="token constant">WAIT</span> 

<span class="token number">4.</span> 客户端发送 <span class="token constant">ACK</span><span class="token operator">=</span><span class="token number">1</span>，ack<span class="token operator">=</span>w<span class="token operator">+</span><span class="token number">1</span>  seq<span class="token operator">=</span>u<span class="token operator">+</span><span class="token number">1</span>  到服务器，服务器收到确认状态变为 <span class="token constant">CLOSED</span> ，  客户端也变为<span class="token constant">CLOSED</span>



简单点 就是说： <span class="token number">1</span> 客户端告诉服务器 我要关闭连接了，此时 状态变为<span class="token constant">FIN</span><span class="token operator">-</span><span class="token constant">WAIT</span><span class="token operator">-</span><span class="token number">1</span>
             <span class="token number">2</span> 服务器告诉客户端，好的我知道了，我要做个准备，变为<span class="token constant">CLOSE</span><span class="token operator">-</span><span class="token constant">WAIT</span> ， 客户端知道了，然后改变自己的状态为<span class="token constant">FIN</span><span class="token operator">-</span><span class="token constant">WAIT</span><span class="token operator">-</span><span class="token number">2</span>
             <span class="token number">3</span> 服务器告诉客户端，我做好准备了，要关闭了 变为 <span class="token constant">LAST</span><span class="token operator">-</span><span class="token constant">WAIT</span>；  客户端知道要关闭了 把自己的状态改为<span class="token constant">TIME</span><span class="token operator">-</span><span class="token constant">WAIT</span>
             <span class="token number">4</span> 客户端告诉服务器，你关闭吧，然后等待<span class="token number">2</span>MSL 待服务器关闭后，客户端也就关闭了
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div></li> <li><p>问题</p> <ul><li><ol><li><p>为什么握手是三次，挥手是四次</p> <p>TCP建立连接时之所以只需要&quot;三次握手&quot;，是因为在第二次&quot;握手&quot;过程中，服务器端发送给客户端的TCP报文是以SYN与ACK作为标志位的。SYN是请求连接标志，表示服务器端同意建立连接；ACK是确认报文，表示告诉客户端，服务器端收到了它的请求报文。</p> <p>即SYN建立连接报文与ACK确认接收报文是在同一次&quot;握手&quot;当中传输的，所以&quot;三次握手&quot;不多也不少，正好让双方明确彼此信息互通。</p></li> <li><p><strong>为什么客户端在TIME-WAIT阶段要等2MSL?</strong></p> <p>为的是确认服务器端是否收到客户端发出的ACK确认报文</p> <p>当客户端发出最后的ACK确认报文时，并不能确定服务器端能够收到该段报文。所以客户端在发送完ACK确认报文之后，会设置一个时长为2MSL的计时器。MSL指的是Maximum Segment Lifetime：一段TCP报文在传输过程中的最大生命周期。2MSL即是服务器端发出为FIN报文和客户端发出的ACK确认报文所能保持有效的最大时长。</p> <p>服务器端在1MSL内没有收到客户端发出的ACK确认报文，就会再次向客户端发出FIN报文；</p></li></ol></li></ul></li></ul></li> <li><p>DNS 域名解析服务</p> <ul><li>DNS服务位于应用层，从上往下第一层。</li> <li>提供了，域名到IP 地址 之间的解析服务， 或者从IP 反查域名。  详细的介绍可以去Node基础介绍里面去看</li></ul></li></ul> <ol start="4"><li><p>各个协议与HTTP协议之间的关系</p> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code>发送端想要访问某个地址 例如 http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>baidu<span class="token punctuation">.</span>com
<span class="token number">1.</span> <span class="token constant">DNS</span>服务， 让<span class="token constant">DNS</span>服务查询到  网址对应的<span class="token constant">IP</span>地址              应用层

<span class="token number">2.</span> <span class="token constant">HTTP</span>协议，将针对这个<span class="token constant">IP</span>地址，目标web服务器，生成<span class="token constant">HTTP</span>请求报文   应用层

<span class="token number">3.</span> <span class="token constant">TCP</span>协议，将<span class="token constant">HTTP</span>协议的请求报文，分割成多个报文段，然后与对方进行三次握手。  传输层

<span class="token number">4.</span> <span class="token constant">IP</span>协议，通过<span class="token constant">IP</span>地址，查询到对方<span class="token constant">MAC</span>地址，也就是物理地址， 因为<span class="token constant">IP</span>协议会变化，<span class="token constant">MAC</span>地址不常变，所以需要使用<span class="token constant">ARP</span>协议，来解析地址， <span class="token constant">IP</span>协议最后一遍中转，一边将数据包传送到接收端     网络层


接收端 接收发送端 发送过来的数据的过程
<span class="token number">1.</span> <span class="token constant">TCP</span>协议，拿到发送端发送的报文段，将报文段重组，恢复成分割前的报文  传输层

<span class="token number">2.</span> <span class="token constant">HTTP</span>协议，对报文进行分析处理   应用层
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div></li> <li><p>URI  和 URL</p></li></ol> <ul><li><p>URI  统一资源标识符  Uniform Resource Identifier</p> <ul><li>Uniform  规定统一的格式，方便处理不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式   http:,   ftp:   等。</li> <li>Resource  资源， 可标识的任何东西，  可以是单一的，也可是多数的集合体。</li> <li>Identifier:   表示可标识的对象</li></ul> <div class="language-javascript line-numbers-mode"><pre class="language-javascript"><code><span class="token number">1.</span> ftp<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>ftp<span class="token punctuation">.</span>is<span class="token punctuation">.</span>co<span class="token punctuation">.</span>za<span class="token operator">/</span>rfc<span class="token operator">/</span>rfc1808<span class="token punctuation">.</span>txt

<span class="token number">2.</span> http<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span>www<span class="token punctuation">.</span>ietf<span class="token punctuation">.</span>org<span class="token operator">/</span>rfc<span class="token operator">/</span>rfc2396<span class="token punctuation">.</span>txt

<span class="token number">3.</span>ldap<span class="token operator">:</span><span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">[</span><span class="token number">2001</span><span class="token operator">:</span>db8<span class="token operator">:</span><span class="token operator">:</span><span class="token number">7</span><span class="token punctuation">]</span><span class="token operator">/</span>c<span class="token operator">=</span><span class="token constant">GB</span><span class="token operator">?</span>objectClass<span class="token operator">?</span>one

<span class="token number">4.</span> mailto<span class="token operator">:</span>John<span class="token punctuation">.</span>Doe@example<span class="token punctuation">.</span>com

<span class="token number">5.</span> news<span class="token operator">:</span>comp<span class="token punctuation">.</span>infosystems<span class="token punctuation">.</span>www<span class="token punctuation">.</span>servers<span class="token punctuation">.</span>unix

<span class="token number">6.</span> tel<span class="token operator">:</span><span class="token operator">+</span><span class="token number">1</span><span class="token operator">-</span><span class="token number">816</span><span class="token operator">-</span><span class="token number">555</span><span class="token operator">-</span><span class="token number">1212</span>

<span class="token number">7.</span> telnet<span class="token operator">:</span><span class="token operator">/</span><span class="token regex">/192.0.2.16:80/</span>

<span class="token number">8.</span> urn<span class="token operator">:</span>oasis<span class="token operator">:</span>names<span class="token operator">:</span>specification<span class="token operator">:</span>docbook<span class="token operator">:</span>dtd<span class="token operator">:</span>xml<span class="token operator">:</span><span class="token number">4.1</span><span class="token number">.2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p>URL 统一资源定位符</p></li></ul> <p>​</p></div> <footer class="page-edit" style="display:none;"><!----> <!----></footer> <!----> <!----> <!----></main> <!----></div></div></div></div><div class="global-ui"><div class="back-to-ceiling" style="right:1rem;bottom:6rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;display:none;" data-v-c6073ba8 data-v-c6073ba8><svg t="1574745035067" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="5404" class="icon" data-v-c6073ba8><path d="M526.60727968 10.90185116a27.675 27.675 0 0 0-29.21455937 0c-131.36607665 82.28402758-218.69155461 228.01873535-218.69155402 394.07834331a462.20625001 462.20625001 0 0 0 5.36959153 69.94390903c1.00431239 6.55289093-0.34802892 13.13561351-3.76865779 18.80351572-32.63518765 54.11355614-51.75690182 118.55860487-51.7569018 187.94566865a371.06718723 371.06718723 0 0 0 11.50484808 91.98906777c6.53300375 25.50556257 41.68394495 28.14064038 52.69160883 4.22606766 17.37162448-37.73630017 42.14135425-72.50938081 72.80769204-103.21549295 2.18761121 3.04276886 4.15646224 6.24463696 6.40373557 9.22774369a1871.4375 1871.4375 0 0 0 140.04691725 5.34970492 1866.36093723 1866.36093723 0 0 0 140.04691723-5.34970492c2.24727335-2.98310674 4.21612437-6.18497483 6.3937923-9.2178004 30.66633723 30.70611158 55.4360664 65.4791928 72.80769147 103.21549355 11.00766384 23.91457269 46.15860503 21.27949489 52.69160879-4.22606768a371.15156223 371.15156223 0 0 0 11.514792-91.99901164c0-69.36717486-19.13165746-133.82216804-51.75690182-187.92578088-3.42062944-5.66790279-4.76302748-12.26056868-3.76865837-18.80351632a462.20625001 462.20625001 0 0 0 5.36959269-69.943909c-0.00994388-166.08943902-87.32547796-311.81420293-218.6915546-394.09823051zM605.93803103 357.87693858a93.93749974 93.93749974 0 1 1-187.89594924 6.1e-7 93.93749974 93.93749974 0 0 1 187.89594924-6.1e-7z" p-id="5405" data-v-c6073ba8></path><path d="M429.50777625 765.63860547C429.50777625 803.39355007 466.44236686 1000.39046097 512.00932183 1000.39046097c45.56695499 0 82.4922232-197.00623328 82.5015456-234.7518555 0-37.75494459-36.9345906-68.35043303-82.4922232-68.34111062-45.57627738-0.00932239-82.52019037 30.59548842-82.51086798 68.34111062z" p-id="5406" data-v-c6073ba8></path></svg></div><div class="reco-bgm-panel" data-v-39f9e6e0><audio id="bgm" src="/notes/简弘亦 - 小幸运 (Live).mp3" data-v-39f9e6e0></audio> <div class="reco-float-box" style="top:80px;z-index:999999;display:none;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><img src="https://assets.smallsunnyfox.com/music/2.jpg" data-v-39f9e6e0></div> <div class="reco-bgm-box" style="right:10px;top:80px;z-index:999999;" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="reco-bgm-cover" style="background-image:url(https://assets.smallsunnyfox.com/music/2.jpg);" data-v-39f9e6e0><div class="mini-operation" style="display:none;" data-v-39f9e6e0><i class="reco-bgm reco-bgm-pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play" style="display:none;" data-v-39f9e6e0></i></div> <div class="falut-message" style="display:none;" data-v-39f9e6e0>
          播放失败
        </div></div> <div class="reco-bgm-info" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-music music" data-v-39f9e6e0></i>小幸运</div> <div class="info-box" data-v-39f9e6e0><i class="reco-bgm reco-bgm-artist" data-v-39f9e6e0></i>简弘亦</div> <div class="reco-bgm-progress" data-v-39f9e6e0><div class="progress-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div> <div class="reco-bgm-operation" data-v-39f9e6e0><i class="reco-bgm reco-bgm-last last" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-pause pause" style="display:none;" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-play play" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-next next" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-volume1 volume" data-v-39f9e6e0></i> <i class="reco-bgm reco-bgm-mute mute" style="display:none;" data-v-39f9e6e0></i> <div class="volume-bar" data-v-39f9e6e0><div class="bar" data-v-39f9e6e0></div></div></div></div> <div class="reco-bgm-left-box" data-v-39f9e6e0 data-v-41bcba48 data-v-39f9e6e0><i class="reco-bgm reco-bgm-left" data-v-39f9e6e0></i></div></div></div></div></div>
    <script src="/notes/assets/js/app.c08f3151.js" defer></script><script src="/notes/assets/js/3.e5945746.js" defer></script><script src="/notes/assets/js/1.444d0b66.js" defer></script><script src="/notes/assets/js/25.c17e9240.js" defer></script>
  </body>
</html>
